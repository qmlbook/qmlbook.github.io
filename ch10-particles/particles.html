<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>10. Particle Simulations &#8212; Qt5 Cadaques Book vmaster</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom-styles.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11. Shader Effects" href="../ch11-shaders/shaders.html" />
    <link rel="prev" title="9. Canvas Element" href="../ch09-canvas/canvas.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          QmlBook</a>
        <span class="navbar-text navbar-version pull-left"><b>master</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Chapters <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ch01-meetqt/meetqt.html">1. Meet Qt 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch02-start/start.html">2. Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch03-qtcreator/qtcreator.html">3. Qt Creator IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch04-qmlstart/qmlstart.html">4. Quick Starter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch05-fluid/fluid.html">5. Fluid Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch06-controls/controls.html">6. Qt Quick Controls 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch07-modelview/modelview.html">7. Model-View-Delegate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch08-felgo/felgo.html">8. Felgo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch09-canvas/canvas.html">9. Canvas Element</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">10. Particle Simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch11-shaders/shaders.html">11. Shader Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch12-multimedia/multimedia.html">12. Multimedia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch13-networking/networking.html">13. Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch14-storage/storage.html">14. Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch15-dynamicqml/dynamicqml.html">15. Dynamic QML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch16-javascript/javascript.html">16. JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch17-qtcpp/qtcpp.html">17. Qt and C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch18-extensions/extensions.html">18. Extending QML with C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch19-felgo-plugins/felgo-plugins.html">19. Felgo Plugins and QML Hot Reloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ch20-python/python.html">20. Qt for Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/testing.html">1. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/deployment.html">2. Deploying QML Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../draganddrop/draganddrop.html">3. Drag and Drop</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">10. Particle Simulations</a><ul>
<li><a class="reference internal" href="#concept">10.1. Concept</a></li>
<li><a class="reference internal" href="#simple-simulation">10.2. Simple Simulation</a></li>
<li><a class="reference internal" href="#particle-parameters">10.3. Particle Parameters</a></li>
<li><a class="reference internal" href="#directed-particles">10.4. Directed Particles</a></li>
<li><a class="reference internal" href="#particle-painters">10.5. Particle Painters</a></li>
<li><a class="reference internal" href="#affecting-particles">10.6. Affecting Particles</a></li>
<li><a class="reference internal" href="#particle-groups">10.7. Particle Groups</a></li>
<li><a class="reference internal" href="#summary">10.8. Summary</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../ch09-canvas/canvas.html" title="Previous Chapter: 9. Canvas Element"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 9. Canvas Element</span>
    </a>
  </li>
  <li>
    <a href="../ch11-shaders/shaders.html" title="Next Chapter: 11. Shader Effects"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">11. Shader Effects &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">10. Particle Simulations</a><ul>
<li><a class="reference internal" href="#concept">10.1. Concept</a></li>
<li><a class="reference internal" href="#simple-simulation">10.2. Simple Simulation</a></li>
<li><a class="reference internal" href="#particle-parameters">10.3. Particle Parameters</a></li>
<li><a class="reference internal" href="#directed-particles">10.4. Directed Particles</a></li>
<li><a class="reference internal" href="#particle-painters">10.5. Particle Painters</a></li>
<li><a class="reference internal" href="#affecting-particles">10.6. Affecting Particles</a></li>
<li><a class="reference internal" href="#particle-groups">10.7. Particle Groups</a></li>
<li><a class="reference internal" href="#summary">10.8. Summary</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="particle-simulations">
<h1>10. Particle Simulations<a class="headerlink" href="#particle-simulations" title="Permalink to this headline">¶</a></h1>
<p><em>Section author: <a class="reference external" href="https://www.linkedin.com/in/jryannel">jryannel&#64;LinkedIn</a></em></p>
<p><div class="btn-group btn-group-justified" role="group"><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook/" target="_blank">Github</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//blob/master/docs/ch10-particles/particles.rst" target="_blank"><i class="glyphicon glyphicon-file"></i> View</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//edit/master/docs/ch10-particles/particles.rst" target="_blank"><i class="glyphicon glyphicon-pencil"></i> Edit</a><a class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//issues/new?labels=ch10&body=back-link%3A+ch10-particles%2Fparticles.html%23particle-simulations" target="_blank"><i class="glyphicon glyphicon-plus"></i> Issue </a><a  class="btn btn-primary btn-xs" href="https://github.com/qmlbook/qmlbook//issues?labels=ch10&page=1&state=open" target="_blank"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Last Build: September 18, 2020 at 19:30 CET</p>
<p class="last">The source code for this chapter can be found in the <a class="reference external" href="../assets">assets folder</a>.</p>
</div>
<p>Particles are a computer graphics techniques to visualize certain graphics effects. Typical effects could be falling leaves, fire, explosions, meteors, clouds, etc.</p>
<p>It differs from other graphics rendering as particles rendering is based on fuzzy aspects. The outcome is not exactly predictable on pixel-base. Parameters to the particle system describe the boundaries for the stochastic simulation. The phenomena rendered with particles is often difficult to visualize with traditional rendering techniques. The good thing is you can let QML elements interact with the particles systems. Also as parameters are expressed as properties they can be animated using the traditional animation techniques.</p>
<div class="section" id="concept">
<h2>10.1. Concept<a class="headerlink" href="#concept" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23concept"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>In the heart of the particle simulation is the <code class="docutils literal notranslate"><span class="pre">ParticleSystem</span></code> which controls the shared timeline. A scene can have several particles systems, each of them with an independent time-line. A particle is emitted using an <code class="docutils literal notranslate"><span class="pre">Emitter</span></code> element and visualized with a <code class="docutils literal notranslate"><span class="pre">ParticlePainter</span></code>, which can be an image, QML item or a shader item.
An emitter provides also the direction for particle using a vector space. Particle ones emitted can’t be manipulated by the emitter anymore. The particle module provides the <code class="docutils literal notranslate"><span class="pre">Affector</span></code>, which allows manipulating parameters of the particle after it has been emitted.</p>
<p>Particles in a system can share timed transitions using the <code class="docutils literal notranslate"><span class="pre">ParticleGroup</span></code> element. By default, every particle is on the empty (‘’) group.</p>
<div class="figure">
<img alt="../_images/particlesystem.png" src="../_images/particlesystem.png" />
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ParticleSystem</span></code> - manages shared time-line between emitters</li>
<li><code class="docutils literal notranslate"><span class="pre">Emitter</span></code> - emits logical particles into the system</li>
<li><code class="docutils literal notranslate"><span class="pre">ParticlePainter</span></code> - particles are visualized by a particle painter</li>
<li><code class="docutils literal notranslate"><span class="pre">Direction</span></code> - vector space for emitted particles</li>
<li><code class="docutils literal notranslate"><span class="pre">ParticleGroup</span></code> - every particle is a member of a group</li>
<li><code class="docutils literal notranslate"><span class="pre">Affector</span></code> - manipulates particles after they have been emitted</li>
</ul>
</div>
<div class="section" id="simple-simulation">
<h2>10.2. Simple Simulation<a class="headerlink" href="#simple-simulation" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23simple-simulation"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Let us have a look at a very simple simulation to get started. Qt Quick makes it actually very simple to get started with particle rendering. For this we need:</p>
<ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">ParticleSystem</span></code> which binds all elements to a simulation</li>
<li>An <code class="docutils literal notranslate"><span class="pre">Emitter</span></code> which emits particles into the system</li>
<li>A <code class="docutils literal notranslate"><span class="pre">ParticlePainter</span></code> derived element, which visualizes the particles</li>
</ul>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="nx">QtQuick</span><span class="p">.</span><span class="nx">Particles</span> <span class="mf">2.0</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">480</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">160</span>
    <span class="k">color:</span> <span class="s2">&quot;#1f1f1f&quot;</span>

    <span class="nx">ParticleSystem</span> <span class="p">{</span>
        <span class="kd">id: particleSystem</span>
    <span class="p">}</span>

    <span class="nx">Emitter</span> <span class="p">{</span>
        <span class="kd">id: emitter</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">width:</span> <span class="mi">160</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">80</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">emitRate:</span> <span class="mi">10</span>
        <span class="k">lifeSpan:</span> <span class="mi">1000</span>
        <span class="k">lifeSpanVariation:</span> <span class="mi">500</span>
        <span class="k">size:</span> <span class="mi">16</span>
        <span class="k">endSize:</span> <span class="mi">32</span>
        <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;green&#39;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ImageParticle</span> <span class="p">{</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/particle.png&quot;</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The outcome of the example will look like this:</p>
<div class="figure">
<img alt="../_images/simpleparticles.png" src="../_images/simpleparticles.png" />
</div>
<p>We start with an 80x80 pixel dark rectangle as our root element and background. Therein we declare a <code class="docutils literal notranslate"><span class="pre">ParticleSystem</span></code>. This is always the first step as the system binds all other elements together. Typically the next element is the <code class="docutils literal notranslate"><span class="pre">Emitter</span></code>, which defines the emitting area based on it’s bounding box and basic parameters for them to be emitted particles. The emitter is bound to the system using the <code class="docutils literal notranslate"><span class="pre">system</span></code> property.</p>
<p>The emitter in this example emits 10 particles per second (<code class="docutils literal notranslate"><span class="pre">emitRate:</span> <span class="pre">10</span></code>) over the area of the emitter with each a lifespan of 1000msec (<code class="docutils literal notranslate"><span class="pre">lifeSpan</span> <span class="pre">:</span> <span class="pre">1000</span></code>) and a lifespan variation between emitted particles of 500 msec (<code class="docutils literal notranslate"><span class="pre">lifeSpanVariation:</span> <span class="pre">500</span></code>). A particle shall start with a size of 16px (<code class="docutils literal notranslate"><span class="pre">size:</span> <span class="pre">16</span></code>) and at the end of its life shall be 32px (<code class="docutils literal notranslate"><span class="pre">endSize:</span> <span class="pre">32</span></code>).</p>
<p>The green bordered rectangle is a tracer element to show the geometry of the emitter. This visualizes that also while the particles are emitted inside the emitters bounding box the rendering is not limited to the emitters bounding box. The rendering position depends upon life-span and direction of the particle. This will get more clear when we look into how to change the direction particles.</p>
<p>The emitter emits logical particles. A logical particle is visualized using a <code class="docutils literal notranslate"><span class="pre">ParticlePainter</span></code> in this example we use an <code class="docutils literal notranslate"><span class="pre">ImageParticle</span></code>, which takes an image URL as the source property. The image particle has also several other properties, which control the appearance of the average particle.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">emitRate</span></code>: particles emitted per second (defaults to 10 per second)</li>
<li><code class="docutils literal notranslate"><span class="pre">lifeSpan</span></code>: milliseconds the particle should last for (defaults to 1000 msec)</li>
<li><code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">endSize</span></code>: size of the particles at the beginning and end of their life  (defaults to 16 px)</li>
</ul>
<p>Changing these properties can influence the result in a drastically way</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Emitter</span> <span class="p">{</span>
        <span class="kd">id: emitter</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">width:</span> <span class="mi">20</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">20</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">emitRate:</span> <span class="mi">40</span>
        <span class="k">lifeSpan:</span> <span class="mi">2000</span>
        <span class="k">lifeSpanVariation:</span> <span class="mi">500</span>
        <span class="k">size:</span> <span class="mi">64</span>
        <span class="k">sizeVariation:</span> <span class="mi">32</span>
        <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;green&#39;</span> <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Besides increasing the emit rate to 40 and the lifespan to 2 seconds the size now starts at 64 pixels and decreases 32 pixels at the end of a particle lifespan.</p>
<div class="figure">
<img alt="../_images/simpleparticles2.png" src="../_images/simpleparticles2.png" />
</div>
<p>Increasing the <code class="docutils literal notranslate"><span class="pre">endSize</span></code> even more would lead to a more or less white background. Please note also when the particles are only emitted in the area defined by the emitter the rendering is not constrained to it.</p>
</div>
<div class="section" id="particle-parameters">
<h2>10.3. Particle Parameters<a class="headerlink" href="#particle-parameters" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23particle-parameters"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>We saw already how to change the behavior of the emitter to change our simulation. The particle painter used allows us how the particle image is visualized for each particle.</p>
<p>Coming back to our example we update our <code class="docutils literal notranslate"><span class="pre">ImageParticle</span></code>. First, we change our particle image to a small sparking star image:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">ImageParticle</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="k">source:</span> <span class="s1">&#39;assets/star.png&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The particle shall be colorized in an gold color which varies from particle to particle by +/- 20%:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">color:</span> <span class="s1">&#39;#FFD700&#39;</span>
<span class="k">colorVariation:</span> <span class="mf">0.2</span>
</pre></div>
</div>
<p>To make the scene more alive we would like to rotate the particles. Each particle should start by 15 degrees clockwise and varies between particles by +/-5 degrees. Additional the particle should continuously rotate with the velocity of 45 degrees per second. The velocity shall also vary from particle to particle by +/- 15 degrees per second:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">rotation:</span> <span class="mi">15</span>
<span class="k">rotationVariation:</span> <span class="mi">5</span>
<span class="k">rotationVelocity:</span> <span class="mi">45</span>
<span class="k">rotationVelocityVariation:</span> <span class="mi">15</span>
</pre></div>
</div>
<p>Last but not least, we change the entry effect for the particle. This is the effect used when a particle comes to life. In this case, we want to use the scale effect:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">entryEffect:</span> <span class="nx">ImageParticle</span><span class="p">.</span><span class="nx">Scale</span>
</pre></div>
</div>
<p>So now we have rotating golden stars appearing all over the place.</p>
<div class="figure">
<img alt="../_images/particleparameters.png" src="../_images/particleparameters.png" />
</div>
<p>Here is the code we changed for the image-particle in one block.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">ImageParticle</span> <span class="p">{</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/star.png&quot;</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">color:</span> <span class="s1">&#39;#FFD700&#39;</span>
        <span class="k">colorVariation:</span> <span class="mf">0.2</span>
        <span class="k">rotation:</span> <span class="mi">0</span>
        <span class="k">rotationVariation:</span> <span class="mi">45</span>
        <span class="k">rotationVelocity:</span> <span class="mi">15</span>
        <span class="k">rotationVelocityVariation:</span> <span class="mi">15</span>
        <span class="k">entryEffect:</span> <span class="nx">ImageParticle</span><span class="p">.</span><span class="nx">Scale</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="directed-particles">
<h2>10.4. Directed Particles<a class="headerlink" href="#directed-particles" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23directed-particles"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>We have seen particles can rotate. But particles can also have a trajectory. The trajectory is specified as the velocity or acceleration of particles defined by a stochastic direction also named a vector space.</p>
<p>There are different vector spaces available to define the velocity or acceleration of a particle:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AngleDirection</span></code> - a direction that varies in angle</li>
<li><code class="docutils literal notranslate"><span class="pre">PointDirection</span></code> - a direction that varies in x and y components</li>
<li><code class="docutils literal notranslate"><span class="pre">TargetDirection</span></code> - a direction towards the target point</li>
</ul>
<div class="figure">
<img alt="../_images/particle_directions.png" src="../_images/particle_directions.png" />
</div>
<p>Let’s try to move the particles over from the left to the right side of our scene by using the velocity directions.</p>
<p>We first try the <code class="docutils literal notranslate"><span class="pre">AngleDirection</span></code>. For this we need to specify the <code class="docutils literal notranslate"><span class="pre">AngleDirection</span></code> as an element of the velocity property of our emitter:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<p>The angle where the particles are emitted is specified using the angle property. The angle is provided as a value between 0..360 degree and 0 points to the right. For our example, we would like the particles to move to the right so 0 is already the right direction. The particles shall spread by +/- 5 degrees:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
    <span class="k">angle:</span> <span class="mi">0</span>
    <span class="k">angleVariation:</span> <span class="mi">15</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we have set our direction, the next thing is to specify the velocity of the particle. This is defined by a magnitude. The magnitude is defined in pixels per seconds. As we have ca. 640px to travel 100 seems to be a good number. This would mean by an average lifetime of 6.4 secs a particle would cross the open space. To make the traveling of the particles more interesting we vary the magnitude using the <code class="docutils literal notranslate"><span class="pre">magnitudeVariation</span></code> and set this to the half of the magnitude:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="k">magnitude:</span> <span class="mi">100</span>
    <span class="k">magnitudeVariation:</span> <span class="mi">50</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/angledirection.png" src="../_images/angledirection.png" />
</div>
<p>Here is the full source code, with an average lifetime set to 6.4 seconds. We set the emitter width and height to 1px. This means all particles are emitted at the same location and from thereon travel based on our given trajectory.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Emitter</span> <span class="p">{</span>
        <span class="kd">id: emitter</span>
        <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
        <span class="k">anchors.verticalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">verticalCenter</span>
        <span class="k">width:</span> <span class="mi">1</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">1</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">lifeSpan:</span> <span class="mi">6400</span>
        <span class="k">lifeSpanVariation:</span> <span class="mi">400</span>
        <span class="k">size:</span> <span class="mi">32</span>
        <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
            <span class="k">angle:</span> <span class="mi">0</span>
            <span class="k">angleVariation:</span> <span class="mi">15</span>
            <span class="k">magnitude:</span> <span class="mi">100</span>
            <span class="k">magnitudeVariation:</span> <span class="mi">50</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>So what is then the acceleration doing? The acceleration adds an acceleration vector to each particle, which changes the velocity vector over time. For example, let’s make a trajectory like an arc of stars. For this we change our velocity direction to -45 degree and remove the variations, to better visualize a coherent arc:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
    <span class="k">angle:</span> <span class="o">-</span><span class="mi">45</span>
    <span class="k">magnitude:</span> <span class="mi">100</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The acceleration direction shall be 90 degrees (down direction) and we choose one-fourth of the velocity magnitude for this:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">acceleration:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
    <span class="k">angle:</span> <span class="mi">90</span>
    <span class="k">magnitude:</span> <span class="mi">25</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The result is an arc going from the center-left to the bottom right.</p>
<div class="figure">
<img alt="../_images/angledirection2.png" src="../_images/angledirection2.png" />
</div>
<p>The values are discovered by try-and-error.</p>
<p>Here is the full code of our emitter.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Emitter</span> <span class="p">{</span>
        <span class="kd">id: emitter</span>
        <span class="k">anchors.left:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">left</span>
        <span class="k">anchors.verticalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">verticalCenter</span>
        <span class="k">width:</span> <span class="mi">1</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">1</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">emitRate:</span> <span class="mi">10</span>
        <span class="k">lifeSpan:</span> <span class="mi">6400</span>
        <span class="k">lifeSpanVariation:</span> <span class="mi">400</span>
        <span class="k">size:</span> <span class="mi">32</span>
        <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
            <span class="k">angle:</span> <span class="o">-</span><span class="mi">45</span>
            <span class="k">angleVariation:</span> <span class="mi">0</span>
            <span class="k">magnitude:</span> <span class="mi">100</span>
        <span class="p">}</span>
        <span class="k">acceleration:</span> <span class="nx">AngleDirection</span> <span class="p">{</span>
            <span class="k">angle:</span> <span class="mi">90</span>
            <span class="k">magnitude:</span> <span class="mi">25</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the next example we would like that the particles again travel from left to right but this time we use the <code class="docutils literal notranslate"><span class="pre">PointDirection</span></code> vector space.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">PointDirection</span></code> derived its vector space from an x and y component. For example, if you want the particles to travel in a 45-degree vector, you need to specify the same value for x and y.</p>
<p>In our case we want the particles to travel from left-to-right building a 15-degree cone. For this we specify a <code class="docutils literal notranslate"><span class="pre">PointDirection</span></code> as our velocity vector space:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">PointDirection</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<p>To achieve a traveling velocity of 100 px per seconds we set our x component to 100. For the 15 degrees (which is 1/6th of 90 degrees) we specify an y variation of 100/6:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">PointDirection</span> <span class="p">{</span>
    <span class="k">x:</span> <span class="mi">100</span>
    <span class="k">y:</span> <span class="mi">0</span>
    <span class="k">xVariation:</span> <span class="mi">0</span>
    <span class="k">yVariation:</span> <span class="mi">100</span><span class="o">/</span><span class="mi">6</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The result should be particles traveling in a 15-degree cone from right to left.</p>
<div class="figure">
<img alt="../_images/pointdirection.png" src="../_images/pointdirection.png" />
</div>
<p>Now coming to our last contender, the <code class="docutils literal notranslate"><span class="pre">TargetDirection</span></code>. The target direction allows us to specify a target point as an x and y coordinate relative to the emitter or an item. When an item has specified the center of the item will become the target point. You can achieve the 15-degree cone by specifying a target variation of 1/6 th of the x target:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="k">velocity:</span> <span class="nx">TargetDirection</span> <span class="p">{</span>
    <span class="k">targetX:</span> <span class="mi">100</span>
    <span class="k">targetY:</span> <span class="mi">0</span>
    <span class="k">targetVariation:</span> <span class="mi">100</span><span class="o">/</span><span class="mi">6</span>
    <span class="k">magnitude:</span> <span class="mi">100</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Target direction are great to use when you have a specific x/y coordinate you want the stream of particles emitted towards.</p>
</div>
<p>I spare you the image as it looks the same as the previous one, instead, I have a quest for you.</p>
<p>In the following image, the red and the green circle specify each a target item for the target direction of the velocity respective the acceleration property. Each target direction has the same parameters. Here the question: Who is responsible for velocity and who is for acceleration?</p>
<div class="figure">
<img alt="../_images/directionquest.png" src="../_images/directionquest.png" />
</div>
</div>
<div class="section" id="particle-painters">
<h2>10.5. Particle Painters<a class="headerlink" href="#particle-painters" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23particle-painters"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Till now we have only used the image based particle painter to visualize particles. Qt comes also with other particle painters:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ItemParticle</span></code>: delegate based particle painter</li>
<li><code class="docutils literal notranslate"><span class="pre">CustomParticle</span></code>: shader based particle painter</li>
</ul>
<p>The ItemParticle can be used to emit QML items as particles. For this, you need to specify your own delegate to the particle.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">ItemParticle</span> <span class="p">{</span>
        <span class="kd">id: particle</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">delegate:</span> <span class="nx">itemDelegate</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Our delegate, in this case, is a random image (using <em>Math.random()</em>), visualized with a white border and a random size.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Component</span> <span class="p">{</span>
        <span class="kd">id: itemDelegate</span>
        <span class="nx">Item</span> <span class="p">{</span>
            <span class="kd">id: container</span>
            <span class="k">width:</span> <span class="mi">32</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">3</span><span class="p">);</span> <span class="k">height:</span> <span class="nx">width</span>
            <span class="nx">Image</span> <span class="p">{</span>
                <span class="k">anchors.fill:</span> <span class="nx">parent</span>
                <span class="k">anchors.margins:</span> <span class="mi">4</span>
                <span class="k">source:</span> <span class="s1">&#39;assets/&#39;</span><span class="o">+</span><span class="nx">images</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">9</span><span class="p">)]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>We emit 4 images per second with a lifespan of 4 seconds each. The particles fade automatically in and out.</p>
<div class="figure">
<img alt="../_images/itemparticle.png" src="../_images/itemparticle.png" />
</div>
<p>For more dynamic cases it is also possible to create an item on your own and let the particle take control of it with <code class="docutils literal notranslate"><span class="pre">take(item,</span> <span class="pre">priority)</span></code>. By this, the particle simulation takes control of your particle and handles the item like an ordinary particle. You can get back control of the item by using <code class="docutils literal notranslate"><span class="pre">give(item)</span></code>. You can influence item particles even more by halt their life progression using <code class="docutils literal notranslate"><span class="pre">freeze(item)</span></code> and resume their life using <code class="docutils literal notranslate"><span class="pre">unfreeze(item)</span></code>.</p>
</div>
<div class="section" id="affecting-particles">
<h2>10.6. Affecting Particles<a class="headerlink" href="#affecting-particles" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23affecting-particles"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Particles are emitted by the emitter. After a particle was emitted it can’t be changed any more by the emitter. The affectors allows you to influence particles after they have been emitted.</p>
<p>Each type of affector affects particles in a different way:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Age</span></code> - alter where the particle is in its life-cycle</li>
<li><code class="docutils literal notranslate"><span class="pre">Attractor</span></code> - attract particles towards a specific point</li>
<li><code class="docutils literal notranslate"><span class="pre">Friction</span></code> - slows down movement proportional to the particle’s current velocity</li>
<li><code class="docutils literal notranslate"><span class="pre">Gravity</span></code> - set’s an acceleration in an angle</li>
<li><code class="docutils literal notranslate"><span class="pre">Turbulence</span></code> - fluid like forces based on a noise image</li>
<li><code class="docutils literal notranslate"><span class="pre">Wander</span></code> -  randomly vary the trajectory</li>
<li><code class="docutils literal notranslate"><span class="pre">GroupGoal</span></code> -  change the state of a group of a particle</li>
<li><code class="docutils literal notranslate"><span class="pre">SpriteGoal</span></code> - change the state of a sprite particle</li>
</ul>
<p class="rubric">Age</p>
<p>Allows particle to age faster. the <em>lifeLeft</em> property specified how much life a particle should have left.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Age</span> <span class="p">{</span>
        <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
        <span class="k">width:</span> <span class="mi">240</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">advancePosition:</span> <span class="kc">true</span>
        <span class="k">lifeLeft:</span> <span class="mi">1200</span>
        <span class="k">once:</span> <span class="kc">true</span>
        <span class="nx">Tracer</span> <span class="p">{}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the example, we shorten the life of the upper particles once when they reach the age of affector to 1200 msec. As we have set the <em>advancePosition</em> to true, we see the particle appearing again on a position when the particle has 1200 msecs left to live.</p>
<div class="figure">
<img alt="../_images/age.png" src="../_images/age.png" />
</div>
<p class="rubric">Attractor</p>
<p>The attractor attracts particles towards a specific point. The point is specified using <code class="docutils literal notranslate"><span class="pre">pointX</span></code> and <code class="docutils literal notranslate"><span class="pre">pointY</span></code>, which is relative to the attractor geometry. The strength specifies the force of attraction. In our example we let particles travel from left to right. The attractor is placed on the top and half of the particles travel through the attractor. Affector only affect particles while they are in their bounding box. This split allows us to see the normal stream and the affected stream simultaneous.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Attractor</span> <span class="p">{</span>
        <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
        <span class="k">width:</span> <span class="mi">160</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">pointX:</span> <span class="mi">0</span>
        <span class="k">pointY:</span> <span class="mi">0</span>
        <span class="k">strength:</span> <span class="mf">1.0</span>
        <span class="nx">Tracer</span> <span class="p">{}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>It’s easy to see that the upper half of the particles are affected by the attracted to the top. The attraction point is set to top-left (0/0 point) of the attractor with a force of 1.0.</p>
<div class="figure">
<img alt="../_images/attractor.png" src="../_images/attractor.png" />
</div>
<p class="rubric">Friction</p>
<p>The friction affector slows down particles by a factor until a certain threshold is reached.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Friction</span> <span class="p">{</span>
        <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
        <span class="k">width:</span> <span class="mi">240</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">factor :</span> <span class="mf">0.8</span>
        <span class="k">threshold:</span> <span class="mi">25</span>
        <span class="nx">Tracer</span> <span class="p">{}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the upper friction area, the particles are slowed down by a factor of 0.8 until the particle reaches 25 pixels per seconds velocity. The threshold act’s like a filter. Particles traveling above the threshold velocity are slowed down by the given factor.</p>
<div class="figure">
<img alt="../_images/friction.png" src="../_images/friction.png" />
</div>
<p class="rubric">Gravity</p>
<p>The gravity affector applies an acceleration In the example we stream the particles from the bottom to the top using an angle direction. The right side is unaffected, where on the left a gravity effect is applied. The gravity is angled to 90 degrees (bottom-direction) with a magnitude of 50.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Gravity</span> <span class="p">{</span>
        <span class="k">width:</span> <span class="mi">240</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">240</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">magnitude:</span> <span class="mi">50</span>
        <span class="k">angle:</span> <span class="mi">90</span>
        <span class="nx">Tracer</span> <span class="p">{}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Particles on the left side try to climb up, but the steady applied acceleration towards the bottom drags them into the direction of the gravity.</p>
<div class="figure">
<img alt="../_images/gravity.png" src="../_images/gravity.png" />
</div>
<p class="rubric">Turbulence</p>
<p>The turbulence affector applies a <em>chaos</em> map of force vectors to the particles. The chaos map is defined by a noise image, which can be defined with the <em>noiseSource</em> property. The strength defines how strong the vector will be applied to the particle movements.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Turbulence</span> <span class="p">{</span>
        <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
        <span class="k">width:</span> <span class="mi">240</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">strength:</span> <span class="mi">100</span>
        <span class="nx">Tracer</span> <span class="p">{}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the upper area of the example, particles are influenced by the turbulence. Their movement is more erratic. The amount of erratic deviation from the original path is defined by the strength.</p>
<div class="figure">
<img alt="../_images/turbulence.png" src="../_images/turbulence.png" />
</div>
<p class="rubric">Wander</p>
<p>The wander manipulates the trajectory. With the property <em>affectedParameter</em> can be specified which parameter (velocity, position or acceleration) is affector by the wander. The <em>pace</em> property specifies the maximum of attribute changes per second. The yVariance and yVariance specify the influence on x and y component of the particle trajectory.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span>    <span class="nx">Wander</span> <span class="p">{</span>
        <span class="k">anchors.horizontalCenter:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">horizontalCenter</span>
        <span class="k">width:</span> <span class="mi">240</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">120</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">affectedParameter:</span> <span class="nx">Wander</span><span class="p">.</span><span class="nx">Position</span>
        <span class="k">pace:</span> <span class="mi">200</span>
        <span class="k">yVariance:</span> <span class="mi">240</span>
        <span class="nx">Tracer</span> <span class="p">{}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the top wander affector particles are shuffled around by random trajectory changes. In this case, the position is changed 200 times per second in the y-direction.</p>
<div class="figure">
<img alt="../_images/wander.png" src="../_images/wander.png" />
</div>
</div>
<div class="section" id="particle-groups">
<h2>10.7. Particle Groups<a class="headerlink" href="#particle-groups" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23particle-groups"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>At the beginning of this chapter, we stated particles are in groups, which is by default the empty group (‘’). Using the <code class="docutils literal notranslate"><span class="pre">GroupGoal</span></code> affector is it possible to let the particle change groups. To visualize this we would like to create a small firework, where rockets start into space and explode in the air into a spectacular firework.</p>
<div class="figure">
<img alt="../_images/firework_teaser.png" src="../_images/firework_teaser.png" />
</div>
<p>The example is divided into 2 parts. The 1st part called “Launch Time” is concerned to set up the scene and introduce particle groups and the 2nd part called “Let there be fireworks” focuses on the group changes.</p>
<p>Let’s get started!</p>
<p class="rubric">Launch Time</p>
<p>To get it going we create a typical dark scene:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="nx">QtQuick</span><span class="p">.</span><span class="nx">Particles</span> <span class="mf">2.0</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">480</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">240</span>
    <span class="k">color:</span> <span class="s2">&quot;#1F1F1F&quot;</span>
    <span class="nx">property</span> <span class="nx">bool</span> <span class="k">tracer:</span> <span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The tracer property will be used to switch the tracer scene wide on and off. The next thing is to declare our particle system:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">ParticleSystem</span> <span class="p">{</span>
    <span class="kd">id: particleSystem</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And our two image particles (one for the rocket and one for the exhaust smoke):</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">ImageParticle</span> <span class="p">{</span>
    <span class="kd">id: smokePainter</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;smoke&#39;</span><span class="p">]</span>
    <span class="k">source:</span> <span class="s2">&quot;assets/particle.png&quot;</span>
    <span class="k">alpha:</span> <span class="mf">0.3</span>
    <span class="k">entryEffect:</span> <span class="nx">ImageParticle</span><span class="p">.</span><span class="nx">None</span>
<span class="p">}</span>

<span class="nx">ImageParticle</span> <span class="p">{</span>
    <span class="kd">id: rocketPainter</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
    <span class="k">source:</span> <span class="s2">&quot;assets/rocket.png&quot;</span>
    <span class="k">entryEffect:</span> <span class="nx">ImageParticle</span><span class="p">.</span><span class="nx">None</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can see in on the images, they use the <em>groups</em> property to declare to which group the particle belongs. It is enough to just declare a name and an implicit group will be created by Qt Quick.</p>
<p>Now it’s time to emit some rockets into the air. For this, we create an emitter on the bottom of our scene and set the velocity in an upward direction. To simulate some gravity we set an acceleration downwards:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">Emitter</span> <span class="p">{</span>
    <span class="kd">id: rocketEmitter</span>
    <span class="k">anchors.bottom:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">bottom</span>
    <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">40</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">group:</span> <span class="s1">&#39;rocket&#39;</span>
    <span class="k">emitRate:</span> <span class="mi">2</span>
    <span class="k">maximumEmitted:</span> <span class="mi">4</span>
    <span class="k">lifeSpan:</span> <span class="mi">4800</span>
    <span class="k">lifeSpanVariation:</span> <span class="mi">400</span>
    <span class="k">size:</span> <span class="mi">32</span>
    <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">270</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">150</span><span class="p">;</span> <span class="k">magnitudeVariation:</span> <span class="mi">10</span> <span class="p">}</span>
    <span class="k">acceleration:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">90</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">50</span> <span class="p">}</span>
    <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The emitter is in the group <em>‘rocket’</em>, the same as our rocket particle painter. Through the group name, they are bound together. The emitter emits particles into the group ‘rocket’ and the rocket particle painter will pain them.</p>
<p>For the exhaust, we use a trail emitter, which follows our rocket. It declares an own group called ‘smoke’ and follows the particles from the ‘rocket’ group:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">TrailEmitter</span> <span class="p">{</span>
    <span class="kd">id: smokeEmitter</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">emitHeight:</span> <span class="mi">1</span>
    <span class="k">emitWidth:</span> <span class="mi">4</span>
    <span class="k">group:</span> <span class="s1">&#39;smoke&#39;</span>
    <span class="k">follow:</span> <span class="s1">&#39;rocket&#39;</span>
    <span class="k">emitRatePerParticle:</span> <span class="mi">96</span>
    <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">90</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">100</span><span class="p">;</span> <span class="k">angleVariation:</span> <span class="mi">5</span> <span class="p">}</span>
    <span class="k">lifeSpan:</span> <span class="mi">200</span>
    <span class="k">size:</span> <span class="mi">16</span>
    <span class="k">sizeVariation:</span> <span class="mi">4</span>
    <span class="k">endSize:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The smoke is directed downwards to simulate the force the smoke comes out of the rocket. The <em>emitHeight</em> and <em>emitWidth</em> specify the are around the particle followed from where the smoke particles shall be emitted. If this is not specified then they are of the particle followed is taken but for this example, we want to increase the effect that the particles stem from a central point near the end of the rocket.</p>
<p>If you start the example now you will see the rockets fly up and some are even flying out of the scene. As this is not really wanted we need to slow them down before they leave the screen. A friction affector can be used here to slow the particles down to a minimum threshold:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">Friction</span> <span class="p">{</span>
    <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
    <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>
    <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">80</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">threshold:</span> <span class="mi">5</span>
    <span class="k">factor:</span> <span class="mf">0.9</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the friction affector, you also need to declare which groups of particles it shall affect. The friction will slow all rockets, which are 80 pixels downwards from the top of the screen down by a factor of 0.9 (try 100 and you will see they almost stop immediately) until they reach a velocity of 5 pixels per second. As the particles have still an acceleration downwards applied the rockets will start sinking toward the ground after they reach the end of their life-span.</p>
<p>As climbing up in the air is hard work and a very unstable situation we want to simulate some turbulences while the ship is climbing:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">Turbulence</span> <span class="p">{</span>
    <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
    <span class="k">anchors.bottom:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">bottom</span>
    <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">160</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">strength:</span> <span class="mi">25</span>
    <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Also, the turbulence needs to declare which groups it shall affect. The turbulence itself reaches from the bottom 160 pixels upwards (until it reaches the border of the friction). They also could overlap.</p>
<p>When you start the example now you will see the rockets are climbing up and then will be slowed down by the friction and fall back to the ground by the still applied downwards acceleration. The next thing would be to start the firework.</p>
<div class="figure">
<img alt="../_images/firework_rockets.png" src="../_images/firework_rockets.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The image shows the scene with the tracers enabled to show the different areas. Rocket particles are emitted in the red area and then affected by the turbulence in the blue area. Finally, they are slowed down by the friction affector in the green area and start falling again, because of the steady applied downwards acceleration.</p>
</div>
<p class="rubric">Let there be fireworks</p>
<p>To be able to change the rocket into a beautiful firework we need add a <code class="docutils literal notranslate"><span class="pre">ParticleGroup</span></code> to encapsulate the changes:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">ParticleGroup</span> <span class="p">{</span>
    <span class="k">name:</span> <span class="s1">&#39;explosion&#39;</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We change to the particle group using a <code class="docutils literal notranslate"><span class="pre">GroupGoal</span></code> affector. The group goal affector is placed near the vertical center of the screen and it will affect the group ‘rocket’. With the <em>groupGoal</em> property we set the target group for the change to ‘explosion’, our earlier defined particle group:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">GroupGoal</span> <span class="p">{</span>
    <span class="kd">id: rocketChanger</span>
    <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>
    <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">80</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
    <span class="k">goalState:</span> <span class="s1">&#39;explosion&#39;</span>
    <span class="k">jump:</span> <span class="kc">true</span>
    <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <em>jump</em> property states the change in groups shall be immediately and not after a certain duration.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the Qt 5 alpha release we could the <em>duration</em> for the group change not get working. Any ideas?</p>
</div>
<p>As the group of the rocket now changes to our ‘explosion’ particle group when the rocket particle enters the group goal area we need to add the firework inside the particle group:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// inside particle group</span>
<span class="nx">TrailEmitter</span> <span class="p">{</span>
    <span class="kd">id: explosionEmitter</span>
    <span class="k">anchors.fill:</span> <span class="nx">parent</span>
    <span class="k">group:</span> <span class="s1">&#39;sparkle&#39;</span>
    <span class="k">follow:</span> <span class="s1">&#39;rocket&#39;</span>
    <span class="k">lifeSpan:</span> <span class="mi">750</span>
    <span class="k">emitRatePerParticle:</span> <span class="mi">200</span>
    <span class="k">size:</span> <span class="mi">32</span>
    <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="o">-</span><span class="mi">90</span><span class="p">;</span> <span class="k">angleVariation:</span> <span class="mi">180</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">50</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The explosion emits particles into the ‘sparkle’ group. We will define soon a particle painter for this group. The trail emitter used follows the rocket particle and emits per rocket 200 particles. The particles are directed upwards and vary by 180 degrees.</p>
<p>As the particles are emitted into the ‘sparkle’ group, we also need to define a particle painter for the particles:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="nx">ImageParticle</span> <span class="p">{</span>
    <span class="kd">id: sparklePainter</span>
    <span class="k">system:</span> <span class="nx">particleSystem</span>
    <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;sparkle&#39;</span><span class="p">]</span>
    <span class="k">color:</span> <span class="s1">&#39;red&#39;</span>
    <span class="k">colorVariation:</span> <span class="mf">0.6</span>
    <span class="k">source:</span> <span class="s2">&quot;assets/star.png&quot;</span>
    <span class="k">alpha:</span> <span class="mf">0.3</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The sparkles of our firework shall be little red stars with an almost transparent color to allow some shine effects.</p>
<p>To make the firework more spectacular we also add a second trail emitter to our particle group, which will emit particles in a narrow cone downwards:</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="c1">// inside particle group</span>
<span class="nx">TrailEmitter</span> <span class="p">{</span>
    <span class="kd">id: explosion2Emitter</span>
    <span class="k">anchors.fill:</span> <span class="nx">parent</span>
    <span class="k">group:</span> <span class="s1">&#39;sparkle&#39;</span>
    <span class="k">follow:</span> <span class="s1">&#39;rocket&#39;</span>
    <span class="k">lifeSpan:</span> <span class="mi">250</span>
    <span class="k">emitRatePerParticle:</span> <span class="mi">100</span>
    <span class="k">size:</span> <span class="mi">32</span>
    <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">90</span><span class="p">;</span> <span class="k">angleVariation:</span> <span class="mi">15</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">400</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Otherwise, the setup is similar to the other explosion trail emitter. That’s it.</p>
<p>Here is the final result.</p>
<div class="figure">
<img alt="../_images/firework_final.png" src="../_images/firework_final.png" />
</div>
<p>Here is the full source code of the rocket firework.</p>
<div class="highlight-qml notranslate"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.5</span>
<span class="kr">import</span> <span class="nx">QtQuick</span><span class="p">.</span><span class="nx">Particles</span> <span class="mf">2.0</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="kd">id: root</span>
    <span class="k">width:</span> <span class="mi">480</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">240</span>
    <span class="k">color:</span> <span class="s2">&quot;#1F1F1F&quot;</span>
    <span class="nx">property</span> <span class="nx">bool</span> <span class="k">tracer:</span> <span class="kc">false</span>

    <span class="nx">ParticleSystem</span> <span class="p">{</span>
        <span class="kd">id: particleSystem</span>
    <span class="p">}</span>

    <span class="nx">ImageParticle</span> <span class="p">{</span>
        <span class="kd">id: smokePainter</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;smoke&#39;</span><span class="p">]</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/particle.png&quot;</span>
        <span class="k">alpha:</span> <span class="mf">0.3</span>
    <span class="p">}</span>

    <span class="nx">ImageParticle</span> <span class="p">{</span>
        <span class="kd">id: rocketPainter</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/rocket.png&quot;</span>
        <span class="k">entryEffect:</span> <span class="nx">ImageParticle</span><span class="p">.</span><span class="nx">Fade</span>
    <span class="p">}</span>

    <span class="nx">Emitter</span> <span class="p">{</span>
        <span class="kd">id: rocketEmitter</span>
        <span class="k">anchors.bottom:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">bottom</span>
        <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">40</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">group:</span> <span class="s1">&#39;rocket&#39;</span>
        <span class="k">emitRate:</span> <span class="mi">2</span>
        <span class="k">maximumEmitted:</span> <span class="mi">8</span>
        <span class="k">lifeSpan:</span> <span class="mi">4800</span>
        <span class="k">lifeSpanVariation:</span> <span class="mi">400</span>
        <span class="k">size:</span> <span class="mi">128</span>
        <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">270</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">150</span><span class="p">;</span> <span class="k">magnitudeVariation:</span> <span class="mi">10</span> <span class="p">}</span>
        <span class="k">acceleration:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">90</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">50</span> <span class="p">}</span>
        <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">TrailEmitter</span> <span class="p">{</span>
        <span class="kd">id: smokeEmitter</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">group:</span> <span class="s1">&#39;smoke&#39;</span>
        <span class="k">follow:</span> <span class="s1">&#39;rocket&#39;</span>
        <span class="k">size:</span> <span class="mi">16</span>
        <span class="k">sizeVariation:</span> <span class="mi">8</span>
        <span class="k">emitRatePerParticle:</span> <span class="mi">16</span>
        <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">90</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">100</span><span class="p">;</span> <span class="k">angleVariation:</span> <span class="mi">15</span> <span class="p">}</span>
        <span class="k">lifeSpan:</span> <span class="mi">200</span>
        <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Friction</span> <span class="p">{</span>
        <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
        <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>
        <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">80</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">threshold:</span> <span class="mi">5</span>
        <span class="k">factor:</span> <span class="mf">0.9</span>

    <span class="p">}</span>

    <span class="nx">Turbulence</span> <span class="p">{</span>
        <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
        <span class="k">anchors.bottom:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">bottom</span>
        <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">160</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">strength:</span><span class="mi">25</span>
        <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;green&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
    <span class="p">}</span>


    <span class="nx">ImageParticle</span> <span class="p">{</span>
        <span class="kd">id: sparklePainter</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;sparkle&#39;</span><span class="p">]</span>
        <span class="k">color:</span> <span class="s1">&#39;red&#39;</span>
        <span class="k">colorVariation:</span> <span class="mf">0.6</span>
        <span class="k">source:</span> <span class="s2">&quot;assets/star.png&quot;</span>
        <span class="k">alpha:</span> <span class="mf">0.3</span>
    <span class="p">}</span>

    <span class="nx">GroupGoal</span> <span class="p">{</span>
        <span class="kd">id: rocketChanger</span>
        <span class="k">anchors.top:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">top</span>
        <span class="k">width:</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span> <span class="k">height:</span> <span class="mi">80</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>
        <span class="k">groups:</span> <span class="p">[</span><span class="s1">&#39;rocket&#39;</span><span class="p">]</span>
        <span class="k">goalState:</span> <span class="s1">&#39;explosion&#39;</span>
        <span class="k">jump:</span> <span class="kc">true</span>
        <span class="nx">Tracer</span> <span class="p">{</span> <span class="k">color:</span> <span class="s1">&#39;blue&#39;</span><span class="p">;</span> <span class="k">visible:</span> <span class="nx">root</span><span class="p">.</span><span class="nx">tracer</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ParticleGroup</span> <span class="p">{</span>
        <span class="k">name:</span> <span class="s1">&#39;explosion&#39;</span>
        <span class="k">system:</span> <span class="nx">particleSystem</span>

        <span class="nx">TrailEmitter</span> <span class="p">{</span>
            <span class="kd">id: explosionEmitter</span>
            <span class="k">anchors.fill:</span> <span class="nx">parent</span>
            <span class="k">group:</span> <span class="s1">&#39;sparkle&#39;</span>
            <span class="k">follow:</span> <span class="s1">&#39;rocket&#39;</span>
            <span class="k">lifeSpan:</span> <span class="mi">750</span>
            <span class="k">emitRatePerParticle:</span> <span class="mi">200</span>
            <span class="k">size:</span> <span class="mi">32</span>
            <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="o">-</span><span class="mi">90</span><span class="p">;</span> <span class="k">angleVariation:</span> <span class="mi">180</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">50</span> <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">TrailEmitter</span> <span class="p">{</span>
            <span class="kd">id: explosion2Emitter</span>
            <span class="k">anchors.fill:</span> <span class="nx">parent</span>
            <span class="k">group:</span> <span class="s1">&#39;sparkle&#39;</span>
            <span class="k">follow:</span> <span class="s1">&#39;rocket&#39;</span>
            <span class="k">lifeSpan:</span> <span class="mi">250</span>
            <span class="k">emitRatePerParticle:</span> <span class="mi">100</span>
            <span class="k">size:</span> <span class="mi">32</span>
            <span class="k">velocity:</span> <span class="nx">AngleDirection</span> <span class="p">{</span> <span class="k">angle:</span> <span class="mi">90</span><span class="p">;</span> <span class="k">angleVariation:</span> <span class="mi">15</span><span class="p">;</span> <span class="k">magnitude:</span> <span class="mi">400</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>10.8. Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p><div class="btn-group" role="group"><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook//new?labels=ch08&body=back-link%3A+ch10-particles%2Fparticles.html%23summary"><i class="glyphicon glyphicon-plus"></i> Issue</a><a class="btn btn-link btn-xs" href="https://github.com/qmlbook/qmlbook/?labels=ch08&page=1&state=open"><i class="glyphicon glyphicon-search"></i> Issues</a></div></p><p>Particles are a very powerful and fun way to express graphical phenomena like smoke. firework, random visual elements. The extended API in Qt 5 is very powerful and we have just scratched the surface. There are several elements we haven’t yet played with like sprites, size tables or color tables. Also when the particles look very playful they have a great potential when used wisely to create some eye catcher in any user interface. Using too many particle effects inside a user interface will definitely lead to the impression towards a game. Creating games is also the real strength of the particles.</p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2018 Jürgen Bocklage-Ryannel and Johan Thelin. This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.<br/>
      Last updated on Sep 18, 2020.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46104829-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>